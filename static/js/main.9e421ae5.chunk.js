(this.webpackJsonpstopover=this.webpackJsonpstopover||[]).push([[0],{190:function(t,e,n){"use strict";n.r(e);var i,o,a,r,c,l=n(0),s=n.n(l),d=n(46),u=n.n(d),m=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,262)).then((function(e){var n=e.getCLS,i=e.getFID,o=e.getFCP,a=e.getLCP,r=e.getTTFB;n(t),i(t),o(t),a(t),r(t)}))},j=n(244),b=n(29),p=n(47),v=Object(p.b)({name:"location_start",initialState:{street:"",number:"",municipality:"",geocode:null},reducers:{setStreet:function(t,e){t.street=e.street},setNumber:function(t,e){t.number=e.number},setMunicipality:function(t,e){t.municipality=e.municipality},resetAddress:function(t,e){t.street="",t.number="",t.municipality=""},setGeocode:function(t,e){t.geocode=e.geocode},resetStart:function(t,e){t.street="",t.number="",t.municipality="",t.geocode=null}}}),g=v.actions,f=(g.setStreet,g.setNumber,g.setMunicipality,g.setGeocode,g.resetAddress,g.resetStart,v.reducer),O=Object(p.b)({name:"location_end",initialState:{street:"",number:"",municipality:"",geocode:null},reducers:{setStreet:function(t,e){t.street=e.street},setNumber:function(t,e){t.number=e.number},setMunicipality:function(t,e){t.municipality=e.municipality},resetAddress:function(t,e){t.street="",t.number="",t.municipality=""},setGeocode:function(t,e){t.geocode=e.geocode},resetEnd:function(t,e){t.street="",t.number="",t.municipality="",t.geocode=null}}}),h=O.actions,y=(h.setStreet,h.setNumber,h.setMunicipality,h.setGeocode,h.resetAddress,h.resetEnd,O.reducer),x=Object(p.b)({name:"notification_control",initialState:{alert:null},reducers:{setAlert:function(t,e){t.alert=e.alert},resetAlert:function(t,e){t.alert=null}}}),S=x.actions,I=(S.setAlert,S.resetAlert,x.reducer),_=n(24),A=Object(p.b)({name:"route_control",initialState:{routes:null},reducers:{setRoutes:function(t,e){t.routes=e.routes},resetRoutes:function(t,e){t.routes=null},addRoute:function(t,e){null!==t.routes&&t.routes.length>0?t.routes=[].concat(Object(_.a)(t.routes),[e.route]):t.routes=[e.route]}}}),k=A.actions,w=(k.setRoutes,k.resetRoutes,k.addRoute,A.reducer),P=Object(p.a)({reducer:{start:f,end:y,notification:I,route:w}}),$=n(246),C=n(247),R=new $.a({uri:"https://api.digitransit.fi/routing/v1/routers/hsl/index/graphql",cache:new C.a}),D=n(54),N=n(254),T=n(253),L=n(251),M=n(256),B=n(257),z=n(141),E=n.n(z),F=n(74),q=n(142),G=n(66),J=n(67),V=n(135),W=n(23),H=n(259),U=n(16),K=n(136),Q=n(250),X=n(32),Y=n(249),Z=Object(Y.a)(i||(i=Object(X.a)(["\n  fragment StoptimeDetails on Stoptime {\n    serviceDay\n    scheduledDeparture\n    departureDelay\n    realtime\n    trip {\n      routeShortName\n      tripHeadsign\n    }\n  }\n"]))),tt=Object(Y.a)(o||(o=Object(X.a)(["\n  fragment StopDetails on Stop {\n    code\n    name\n    gtfsId\n    zoneId\n    vehicleMode\n    stopTimesForPatterns(omitNonPickups: true, timeRange: 1800) {\n      stopTimes {\n        ...StoptimeDetails\n      }\n    }\n  }\n  ","\n"])),Z),et=Object(Y.a)(a||(a=Object(X.a)(["\n  fragment LegDetails on Leg {\n    mode\n    startTime\n    endTime\n    from {\n      lat\n      lon\n      name\n      stop {\n        ...StopDetails\n      }\n    }\n  }\n  ","\n"])),tt),nt=Object(Y.a)(r||(r=Object(X.a)(["\n  fragment ItineraryDetails on Itinerary {\n    walkDistance\n    duration\n    legs {\n      ...LegDetails\n    }\n  }\n  ","\n"])),et),it=(n.p,Object(Y.a)(c||(c=Object(X.a)(["\n  query plan(\n      $fromPlace: String!,\n      $toPlace: String!,\n      $numItineraries: Int,\n      $walkSpeed: Float,\n      $walkReluctance: Float,\n      $walkBoardCost: Int,\n      $minTransferTime: Int,\n      $date: String,\n      $time: String,\n      $transportModes: [TransportMode]\n  ) {\n    plan(\n      fromPlace: $fromPlace,\n      toPlace: $toPlace,\n      numItineraries: $numItineraries,\n      walkSpeed: $walkSpeed,\n      walkReluctance: $walkReluctance,\n      walkBoardCost: $walkBoardCost,\n      minTransferTime: $minTransferTime,\n      date: $date,\n      time: $time,\n      transportModes: $transportModes\n    ) {\n      ...ItineraryDetails\n    }\n  }\n  ","\n"])),nt)),ot=n(2),at=function(t){Object(K.a)(t);var e=Object(Q.a)(it,{}),n=Object(U.a)(e,2),i=(n[0],n[1]),o=i.called,a=i.data,r=i.error,c=i.loading;return Object(ot.jsxs)("section",{id:t.id,"data-testid":t.id,children:[o&&c&&Object(ot.jsx)("p",{children:"Itinerary loading"}),o&&r&&Object(ot.jsx)("p",{children:"Itinerary loading failed"}),o&&a&&Object(ot.jsx)("p",{children:"Itinerary loaded"}),!o&&Object(ot.jsx)("p",{children:"Itinerary loading not initialized"})]})},rt=n(6),ct=n(260),lt=n(245),st=n(114),dt=n.n(st),ut=n(139),mt=n.n(ut),jt=n(255),bt=n(138),pt=function(){return"".concat(NOMINATIV_API_BASE)},vt=n.n(bt).a.create({baseUrl:pt()}),gt=function(t,e,n){return"street=".concat(e,"%20").concat(t,"&city=").concat(n,"&limit=2&format=json")},ft=function(t){var e,n=t.end,i=void 0!==n&&n,o=t.start,a=void 0!==o&&o,r=t.id,c=void 0===r?"default":r,l=i?Object(b.c)((function(t){return t.end})):a?Object(b.c)((function(t){return t.start})):null,s=Object(b.b)(),d=function(){document.getElementById("".concat(c,"-street")).value="",document.getElementById("".concat(c,"-number")).value="",document.getElementById("".concat(c,"-municipality")).value=""};return i||a?Object(ot.jsxs)(ct.a,(e={id:c,"data-testid":c,component:"form",variant:"outlined",sx:{"& > :not(style)":{m:1},minWidth:300,maxWidth:800,marginBottom:2,backgroundColor:"rgba(0,0,0,0.05)"},noValidate:!0,autoComplete:"off"},Object(rt.a)(e,"id",c),Object(rt.a)(e,"children",[i?Object(ot.jsx)(H.a,{children:Object(ot.jsx)(jt.a,{icon:Object(ot.jsx)(dt.a,{}),label:"P\xe4\xe4tepiste",color:"info",variant:"outlined"})}):a?Object(ot.jsx)(H.a,{children:Object(ot.jsx)(jt.a,{icon:Object(ot.jsx)(dt.a,{}),label:"L\xe4ht\xf6piste",color:"info",variant:"outlined"})}):null,Object(ot.jsx)(lt.a,{id:"".concat(c,"-street"),"data-testid":"".concat(c,"-street"),InputLabelProps:{shrink:!0},label:"katu",defaultValue:"",size:"small",onChange:function(t){i?s({type:"location_end/setStreet",street:t.target.value}):a?s({type:"location_start/setStreet",street:t.target.value}):console.log("input not set to either end or start")},color:"primary"},"".concat(c,"-street")),Object(ot.jsx)(lt.a,{id:"".concat(c,"-number"),"data-testid":"".concat(c,"-number"),InputLabelProps:{shrink:!0},label:"numero",defaultValue:"",size:"small",onChange:function(t){i?s({type:"location_end/setNumber",number:t.target.value}):a?s({type:"location_start/setNumber",number:t.target.value}):console.log("input not set to either end or start")},sx:{maxWidth:80},color:"primary"},"".concat(c,"-number")),Object(ot.jsx)(lt.a,{id:"".concat(c,"-municipality"),"data-testid":"".concat(c,"-municipality"),InputLabelProps:{shrink:!0},label:"kunta",defaultValue:"",size:"small",onChange:function(t){i?s({type:"location_end/setMunicipality",municipality:t.target.value}):a?s({type:"location_start/setMunicipality",municipality:t.target.value}):console.log("input not set to either end or start")},color:"primary"},"".concat(c,"-municipality")),Object(ot.jsx)(M.a,{id:"".concat(c,"-query"),"data-testid":"".concat(c,"-query"),variant:"outlined",size:"medium",color:"secondary",onClick:function(){var t=null!==l&&void 0!==l?l:null,e=t.street,n=t.number,o=t.municipality;a&&vt.get("".concat(pt()).concat(gt(e,n,o))).then((function(t){var e,n,i=t.data;i.length>0&&(null===(e=i[0])||void 0===e?void 0:e.lat)&&(null===(n=i[0])||void 0===n?void 0:n.address)&&(s({type:"location_start/setGeocode",geocode:i[0]}),s({type:"notification_control/setAlert",alert:{mode:"info",message:"Aloituspiste asetettu"}}),d())})).catch((function(t){console.warn(t.message)})),i&&vt.get("".concat(pt()).concat(gt(e,n,o))).then((function(t){var e,n,i=t.data;i.length>0&&(null===(e=i[0])||void 0===e?void 0:e.lat)&&(null===(n=i[0])||void 0===n?void 0:n.address)&&(s({type:"location_end/setGeocode",geocode:i[0]}),s({type:"notification_control/setAlert",alert:{mode:"info",message:"P\xe4\xe4tepiste asetettu"}}),d())})).catch((function(t){console.warn(t.message)}))},children:"Aseta"},"".concat(c,"-query"))]),e),c):Object(ot.jsx)(ct.a,{id:c,"data-testid":c,variant:"outlined",sx:{"& > :not(style)":{m:1},minWidth:300,maxWidth:800,marginBottom:2,backgroundColor:"rgba(0,0,0,0.05)"},children:Object(ot.jsx)(H.a,{children:Object(ot.jsx)(jt.a,{icon:Object(ot.jsx)(mt.a,{}),label:"Virheelliset m\xe4\xe4ritykset",color:"error",variant:"outlined"})})},c)};var Ot=function(t){var e=Object(b.c)((function(t){return t.start})),n=Object(b.c)((function(t){return t.end})),i=Object(b.b)();return Object(ot.jsxs)("section",{id:t.id,"data-testid":t.id,children:[Object(ot.jsx)(ft,{id:"".concat(t.id,".address-form-start"),end:!1,start:!0}),Object(ot.jsx)(ft,{id:"".concat(t.id,".address-form-end"),end:!0,start:!1}),!1,Object(ot.jsx)(M.a,{id:"".concat(t.id,".generate-route"),"data-testid":"".concat(t.id,".generate-route"),variant:"outlined",size:"medium",color:"secondary",disabled:!(null!==e.geocode&&e.geocode.hasOwnProperty("lat"))||!(null!==n.geocode&&n.geocode.hasOwnProperty("lat")),onClick:function(t){var o=function(t,e){var n,i,o,a,r,c,l,s,d,u,m,j,b,p,v,g,f="".concat(null===t||void 0===t||null===(n=t.address)||void 0===n?void 0:n.house_number,", ").concat(null===t||void 0===t||null===(i=t.address)||void 0===i?void 0:i.road,", ").concat((null===t||void 0===t||null===(o=t.address)||void 0===o?void 0:o.city)||(null===t||void 0===t||null===(a=t.address)||void 0===a?void 0:a.town),"::").concat(null===t||void 0===t?void 0:t.lat,",").concat(null===t||void 0===t?void 0:t.lon),O="".concat(null===e||void 0===e||null===(r=e.address)||void 0===r?void 0:r.house_number,", ").concat(null===e||void 0===e||null===(c=e.address)||void 0===c?void 0:c.road,", ").concat((null===e||void 0===e||null===(l=e.address)||void 0===l?void 0:l.city)||(null===e||void 0===e||null===(s=e.address)||void 0===s?void 0:s.town),"::").concat(null===e||void 0===e?void 0:e.lat,",").concat(null===e||void 0===e?void 0:e.lon);return{start:{queryLocation:f,street:null===t||void 0===t||null===(d=t.address)||void 0===d?void 0:d.road,number:null===t||void 0===t||null===(u=t.address)||void 0===u?void 0:u.house_number,municipality:(null===t||void 0===t||null===(m=t.address)||void 0===m?void 0:m.city)||(null===t||void 0===t||null===(j=t.address)||void 0===j?void 0:j.town)},end:{queryLocation:O,street:null===e||void 0===e||null===(b=e.address)||void 0===b?void 0:b.road,number:null===e||void 0===e||null===(p=e.address)||void 0===p?void 0:p.house_number,municipality:(null===e||void 0===e||null===(v=e.address)||void 0===v?void 0:v.city)||(null===e||void 0===e||null===(g=e.address)||void 0===g?void 0:g.town)}}}(e.geocode,n.geocode);console.warn(o),function(t){var e=[],n=JSON.parse(localStorage.getItem("".concat(D.a,".routes")));null!==n&&n.length>0&&n.map((function(t){t.hasOwnProperty("latitude")&&e.append(t)})),e=[].concat(Object(_.a)(e),[t]),localStorage.setItem("".concat(D.a,".routes"),JSON.stringify(e))}(o),i({type:"route_control/addRoute",route:o}),i({type:"notification_control/setAlert",alert:{mode:"success",message:"Reitti luotu"}}),i({type:"location_end/resetEnd"}),i({type:"location_start/resetStart"})},children:"Luo reitti"})]})},ht=function(t){var e=Object(b.c)((function(t){return t.end})),n=Object(b.c)((function(t){return t.start}));return Object(ot.jsxs)("section",{id:t.id,"data-testid":t.id,children:[n.geocode?Object(ot.jsxs)("p",{children:[n.geocode.latitude,",",n.geocode.longitude]}):Object(ot.jsx)("p",{children:"L\xe4ht\xf6piste puuttuu"}),e.geocode?Object(ot.jsxs)("p",{children:[e.geocode.latitude,",",e.geocode.longitude]}):Object(ot.jsx)("p",{children:"P\xe4\xe4tepiste puuttuu"})]})},yt=function(t){return Object(ot.jsx)("section",{id:t.id,"data-testid":t.id,children:Object(ot.jsxs)(W.c,{children:[Object(ot.jsx)(W.a,{path:"/planning",children:Object(ot.jsx)(Ot,{id:"".concat(t.id,".planning")})}),Object(ot.jsx)(W.a,{path:"/details",children:Object(ot.jsx)(ht,{id:"".concat(t.id,".geocode")})}),Object(ot.jsx)(W.a,{exact:!0,path:"/",children:Object(ot.jsx)(at,{id:"".concat(t.id,".routes")})})]})})},xt=function(t){var e=t.id;return Object(ot.jsxs)("nav",{id:e,"data-testid":e,style:{display:"inline-flex",alignItems:"center"},children:[Object(ot.jsx)(H.a,{orientation:"vertical",variant:"middle",color:J.a.A700,flexItem:!0}),Object(ot.jsx)(M.a,{to:"/",sx:{margin:1},variant:"outlined",component:F.b,children:"Reitit"}),Object(ot.jsx)(H.a,{orientation:"vertical",variant:"middle",color:J.a.A700,flexItem:!0}),Object(ot.jsx)(M.a,{to:"/details",sx:{margin:1},variant:"outlined",component:F.b,children:"Pistetiedot"}),Object(ot.jsx)(H.a,{orientation:"vertical",variant:"middle",color:J.a.A700,flexItem:!0}),Object(ot.jsx)(M.a,{to:"/planning",sx:{margin:1},variant:"outlined",component:F.b,children:"Reittisuunnittelu"}),Object(ot.jsx)(H.a,{orientation:"vertical",variant:"middle",color:J.a.A700,flexItem:!0})]})},St=function(t){var e,n=Object(b.c)((function(t){return t.notification})).alert,i=Object(b.b)();Object(l.useEffect)((function(){var t=JSON.parse(localStorage.getItem("".concat(D.a,".routes")))||null;null!==t&&t.length>0&&(i({type:"route_control/setRoutes",routes:t}),i({type:"notification_control/setAlert",alert:{message:"Reitit palautettu"}}))}),[]);var o=Object(ot.jsxs)(s.a.Fragment,{children:[Object(ot.jsx)(M.a,{color:"secondary",size:"small",onClick:function(){return i({type:"notification_control/resetAlert"})},children:"UNDO"}),Object(ot.jsx)(B.a,{size:"small","aria-label":"close",color:"inherit",onClick:function(){return i({type:"notification_control/resetAlert"})},children:Object(ot.jsx)(E.a,{fontSize:"small"})})]});return Object(ot.jsx)("article",{id:t.id,"data-testid":t.id,children:Object(ot.jsx)(F.a,{children:Object(ot.jsxs)(N.a,{theme:Object(q.a)({palette:{primary:{main:G.a.A700},secondary:{main:J.a.A700},neutral:{main:V.a.A700}}}),children:[Object(ot.jsxs)(T.a,{variant:"h5",children:["StopOver - ",t.ver]}),Object(ot.jsx)(xt,{id:"".concat(t.id,".navigation")}),Object(ot.jsx)(yt,{id:"".concat(t.id,".content")}),Object(ot.jsx)(L.a,{id:"".concat(t.id,".snack"),open:null!==n,autoHideDuration:6e3,onClose:function(){return i({type:"notification_control/resetAlert"})},message:null!==(e=null===n||void 0===n?void 0:n.message)&&void 0!==e?e:"testi",action:o})]})})})};u.a.render(Object(ot.jsx)(s.a.StrictMode,{children:Object(ot.jsx)(b.a,{store:P,children:Object(ot.jsx)(j.a,{client:R,children:Object(ot.jsx)(St,{id:D.a,ver:D.b})})})}),document.getElementById("root")),m()},54:function(t){t.exports=JSON.parse('{"a":"rff.app.stopover","b":"0.3.23"}')}},[[190,1,2]]]);
//# sourceMappingURL=main.9e421ae5.chunk.js.map