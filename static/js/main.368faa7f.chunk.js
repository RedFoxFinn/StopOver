(this.webpackJsonpstopover=this.webpackJsonpstopover||[]).push([[0],{190:function(t,e,n){"use strict";n.r(e);var a,i,o,c,r,l=n(0),s=n.n(l),d=n(46),u=n.n(d),m=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,262)).then((function(e){var n=e.getCLS,a=e.getFID,i=e.getFCP,o=e.getLCP,c=e.getTTFB;n(t),a(t),i(t),o(t),c(t)}))},j=n(244),b=n(29),p=n(47),f=Object(p.b)({name:"location_start",initialState:{street:"",number:"",municipality:"",geocode:null},reducers:{setStreet:function(t,e){t.street=e.street},setNumber:function(t,e){t.number=e.number},setMunicipality:function(t,e){t.municipality=e.municipality},resetAddress:function(t,e){t.street="",t.number="",t.municipality=""},setGeocode:function(t,e){t.geocode=e.geocode},resetStart:function(t,e){t.street="",t.number="",t.municipality="",t.geocode=null}}}),g=f.actions,O=(g.setStreet,g.setNumber,g.setMunicipality,g.setGeocode,g.resetAddress,g.resetStart,f.reducer),y=Object(p.b)({name:"location_end",initialState:{street:"",number:"",municipality:"",geocode:null},reducers:{setStreet:function(t,e){t.street=e.street},setNumber:function(t,e){t.number=e.number},setMunicipality:function(t,e){t.municipality=e.municipality},resetAddress:function(t,e){t.street="",t.number="",t.municipality=""},setGeocode:function(t,e){t.geocode=e.geocode},resetEnd:function(t,e){t.street="",t.number="",t.municipality="",t.geocode=null}}}),h=y.actions,v=(h.setStreet,h.setNumber,h.setMunicipality,h.setGeocode,h.resetAddress,h.resetEnd,y.reducer),x=Object(p.b)({name:"notification_control",initialState:{alert:null},reducers:{setAlert:function(t,e){t.alert=e.alert},resetAlert:function(t,e){t.alert=null}}}),S=x.actions,I=(S.setAlert,S.resetAlert,x.reducer),k=n(24),_=Object(p.b)({name:"route_control",initialState:{routes:null},reducers:{setRoutes:function(t,e){t.routes=e.routes},resetRoutes:function(t,e){t.routes=null},addRoute:function(t,e){null!==t.routes&&t.routes.length>0?t.routes=[].concat(Object(k.a)(t.routes),[e.route]):t.routes=[e.route]}}}),A=_.actions,w=(A.setRoutes,A.resetRoutes,A.addRoute,_.reducer),P=Object(p.a)({reducer:{start:O,end:v,notification:I,route:w}}),$=n(246),C=n(247),R=new $.a({uri:"https://api.digitransit.fi/routing/v1/routers/hsl/index/graphql",cache:new C.a}),D=n(59),L=n(254),N=n(253),T=n(251),M=n(256),z=n(257),B=n(141),q=n.n(B),E=n(74),F=n(142),G=n(66),J=n(67),V=n(136),W=n(23),H=n(259),U=n(16),K=n(137),Q=n(250),X=n(32),Y=n(249),Z=Object(Y.a)(a||(a=Object(X.a)(["\n  fragment StoptimeDetails on Stoptime {\n    serviceDay\n    scheduledDeparture\n    departureDelay\n    realtime\n    trip {\n      routeShortName\n      tripHeadsign\n    }\n  }\n"]))),tt=Object(Y.a)(i||(i=Object(X.a)(["\n  fragment StopDetails on Stop {\n    code\n    name\n    gtfsId\n    zoneId\n    vehicleMode\n    stopTimesForPatterns(omitNonPickups: true, timeRange: 1800) {\n      stopTimes {\n        ...StoptimeDetails\n      }\n    }\n  }\n  ","\n"])),Z),et=Object(Y.a)(o||(o=Object(X.a)(["\n  fragment LegDetails on Leg {\n    mode\n    startTime\n    endTime\n    from {\n      lat\n      lon\n      name\n      stop {\n        ...StopDetails\n      }\n    }\n  }\n  ","\n"])),tt),nt=Object(Y.a)(c||(c=Object(X.a)(["\n  fragment ItineraryDetails on Itinerary {\n    walkDistance\n    duration\n    legs {\n      ...LegDetails\n    }\n  }\n  ","\n"])),et),at=(n.p,Object(Y.a)(r||(r=Object(X.a)(["\n  query plan(\n      $fromPlace: String!,\n      $toPlace: String!,\n      $numItineraries: Int,\n      $walkSpeed: Float,\n      $walkReluctance: Float,\n      $walkBoardCost: Int,\n      $minTransferTime: Int,\n      $date: String,\n      $time: String,\n      $transportModes: [TransportMode]\n  ) {\n    plan(\n      fromPlace: $fromPlace,\n      toPlace: $toPlace,\n      numItineraries: $numItineraries,\n      walkSpeed: $walkSpeed,\n      walkReluctance: $walkReluctance,\n      walkBoardCost: $walkBoardCost,\n      minTransferTime: $minTransferTime,\n      date: $date,\n      time: $time,\n      transportModes: $transportModes\n    ) {\n      ...ItineraryDetails\n    }\n  }\n  ","\n"])),nt)),it=n(2),ot=function(t){Object(K.a)(t);var e=Object(Q.a)(at,{}),n=Object(U.a)(e,2),a=(n[0],n[1]),i=a.called,o=a.data,c=a.error,r=a.loading;return Object(it.jsxs)("section",{id:t.id,"data-testid":t.id,children:[i&&r&&Object(it.jsx)("p",{children:"Itinerary loading"}),i&&c&&Object(it.jsx)("p",{children:"Itinerary loading failed"}),i&&o&&Object(it.jsx)("p",{children:"Itinerary loaded"}),!i&&Object(it.jsx)("p",{children:"Itinerary loading not initialized"})]})},ct=n(6),rt=n(111),lt=n.n(rt),st=n(260),dt=n(245),ut=n(115),mt=n.n(ut),jt=n(139),bt=n.n(jt),pt=n(255),ft="https://api.positionstack.com/v1/forward?",gt=function(){return"access_key=".concat("c93acdafc0e945c4fb92a02fe2544f58","&")},Ot=function(t,e,n){return"&query=".concat(t,"%20").concat(e,",%20").concat(n,"&output=json&limit=1")},yt=function(t){var e,n=t.end,a=void 0!==n&&n,i=t.start,o=void 0!==i&&i,c=t.id,r=void 0===c?"default":c,l=a?Object(b.c)((function(t){return t.end})):o?Object(b.c)((function(t){return t.start})):null,s=Object(b.b)();return a||o?Object(it.jsxs)(st.a,(e={id:r,"data-testid":r,component:"form",variant:"outlined",sx:{"& > :not(style)":{m:1},minWidth:300,maxWidth:800,marginBottom:2,backgroundColor:"rgba(0,0,0,0.05)"},noValidate:!0,autoComplete:"off"},Object(ct.a)(e,"id",r),Object(ct.a)(e,"children",[a?Object(it.jsx)(H.a,{children:Object(it.jsx)(pt.a,{icon:Object(it.jsx)(mt.a,{}),label:"P\xe4\xe4tepiste",color:"info",variant:"outlined"})}):o?Object(it.jsx)(H.a,{children:Object(it.jsx)(pt.a,{icon:Object(it.jsx)(mt.a,{}),label:"L\xe4ht\xf6piste",color:"info",variant:"outlined"})}):null,Object(it.jsx)(dt.a,{id:"".concat(r,"-street"),"data-testid":"".concat(r,"-street"),InputLabelProps:{shrink:!0},label:"katu",defaultValue:"",size:"small",onChange:function(t){a?s({type:"location_end/setStreet",street:t.target.value}):o?s({type:"location_start/setStreet",street:t.target.value}):console.log("input not set to either end or start")},color:"primary"},"".concat(r,"-street")),Object(it.jsx)(dt.a,{id:"".concat(r,"-number"),"data-testid":"".concat(r,"-number"),InputLabelProps:{shrink:!0},label:"numero",defaultValue:"",size:"small",onChange:function(t){a?s({type:"location_end/setNumber",number:t.target.value}):o?s({type:"location_start/setNumber",number:t.target.value}):console.log("input not set to either end or start")},sx:{maxWidth:80},color:"primary"},"".concat(r,"-number")),Object(it.jsx)(dt.a,{id:"".concat(r,"-municipality"),"data-testid":"".concat(r,"-municipality"),InputLabelProps:{shrink:!0},label:"kunta",defaultValue:"",size:"small",onChange:function(t){a?s({type:"location_end/setMunicipality",municipality:t.target.value}):o?s({type:"location_start/setMunicipality",municipality:t.target.value}):console.log("input not set to either end or start")},color:"primary"},"".concat(r,"-municipality")),Object(it.jsx)(M.a,{id:"".concat(r,"-query"),"data-testid":"".concat(r,"-query"),variant:"outlined",size:"medium",color:"secondary",onClick:function(){var t=null!==l&&void 0!==l?l:null,e=t.street,n=t.number,i=t.municipality;o&&lt.a.get("".concat(ft).concat(gt()).concat(Ot(e,n,i))).then((function(t){var e,n=t.data;(null===(e=n.data[0])||void 0===e?void 0:e.latitude)&&(s({type:"location_start/setGeocode",geocode:n.data[0]}),s({type:"notification_control/setAlert",alert:{mode:"info",message:"Aloituspiste asetettu"}}),document.getElementById("".concat(r,"-street")).value="",document.getElementById("".concat(r,"-number")).value="",document.getElementById("".concat(r,"-municipality")).value="")})).catch((function(t){console.warn(t.message)})),a&&lt.a.get("".concat(ft).concat(gt()).concat(Ot(e,n,i))).then((function(t){var e,n=t.data;(null===(e=n.data[0])||void 0===e?void 0:e.latitude)&&(s({type:"location_end/setGeocode",geocode:n.data[0]}),s({type:"notification_control/setAlert",alert:{mode:"info",message:"P\xe4\xe4tepiste asetettu"}}))})).catch((function(t){console.warn(t.message)}))},children:"Aseta"},"".concat(r,"-query"))]),e),r):Object(it.jsx)(st.a,{id:r,"data-testid":r,variant:"outlined",sx:{"& > :not(style)":{m:1},minWidth:300,maxWidth:800,marginBottom:2,backgroundColor:"rgba(0,0,0,0.05)"},children:Object(it.jsx)(H.a,{children:Object(it.jsx)(pt.a,{icon:Object(it.jsx)(bt.a,{}),label:"Virheelliset m\xe4\xe4ritykset",color:"error",variant:"outlined"})})},r)};var ht=function(t){var e=Object(b.c)((function(t){return t.start})),n=Object(b.c)((function(t){return t.end})),a=Object(b.b)();return Object(it.jsxs)("section",{id:t.id,"data-testid":t.id,children:[Object(it.jsx)(yt,{id:"".concat(t.id,".address-form-start"),end:!1,start:!0}),Object(it.jsx)(yt,{id:"".concat(t.id,".address-form-end"),end:!0,start:!1}),!1,Object(it.jsx)(M.a,{id:"".concat(t.id,".generate-route"),"data-testid":"".concat(t.id,".generate-route"),variant:"outlined",size:"medium",color:"secondary",disabled:!(null!==e.geocode&&e.geocode.hasOwnProperty("latitude"))||!(null!==n.geocode&&n.geocode.hasOwnProperty("latitude")),onClick:function(t){var i=function(t,e){var n,a="".concat(t.name,", ").concat((null===t||void 0===t?void 0:t.locality)||t.administrative_area,"::").concat(t.latitude,",").concat(t.longitude),i="".concat(e.name,", ").concat(null!==(n=e.locality)&&void 0!==n?n:e.administrative_area,"::").concat(e.latitude,",").concat(e.longitude);return{start:{queryLocation:a,street:t.street,number:t.number,municipality:(null===t||void 0===t?void 0:t.locality)||t.administrative_area},end:{queryLocation:i,street:e.street,number:e.number,municipality:(null===e||void 0===e?void 0:e.locality)||e.administrative_area}}}(e.geocode,n.geocode);console.warn(i),function(t){var e=[],n=JSON.parse(localStorage.getItem("".concat(D.a,".routes")));null!==n&&n.length>0&&n.map((function(t){t.hasOwnProperty("latitude")&&e.append(t)})),e=[].concat(Object(k.a)(e),[t]),localStorage.setItem("".concat(D.a,".routes"),JSON.stringify(e))}(i),a({type:"route_control/addRoute",route:i}),a({type:"notification_control/setAlert",alert:{mode:"success",message:"Reitti luotu"}}),a({type:"location_end/resetEnd"}),a({type:"location_start/resetStart"})},children:"Luo reitti"})]})},vt=function(t){var e=Object(b.c)((function(t){return t.end})),n=Object(b.c)((function(t){return t.start}));return Object(it.jsxs)("section",{id:t.id,"data-testid":t.id,children:[n.geocode?Object(it.jsxs)("p",{children:[n.geocode.latitude,",",n.geocode.longitude]}):Object(it.jsx)("p",{children:"L\xe4ht\xf6piste puuttuu"}),e.geocode?Object(it.jsxs)("p",{children:[e.geocode.latitude,",",e.geocode.longitude]}):Object(it.jsx)("p",{children:"P\xe4\xe4tepiste puuttuu"})]})},xt=function(t){return Object(it.jsx)("section",{id:t.id,"data-testid":t.id,children:Object(it.jsxs)(W.c,{children:[Object(it.jsx)(W.a,{path:"/planning",children:Object(it.jsx)(ht,{id:"".concat(t.id,".planning")})}),Object(it.jsx)(W.a,{path:"/details",children:Object(it.jsx)(vt,{id:"".concat(t.id,".geocode")})}),Object(it.jsx)(W.a,{exact:!0,path:"/",children:Object(it.jsx)(ot,{id:"".concat(t.id,".routes")})})]})})},St=function(t){var e=t.id;return Object(it.jsxs)("nav",{id:e,"data-testid":e,style:{display:"inline-flex",alignItems:"center"},children:[Object(it.jsx)(H.a,{orientation:"vertical",variant:"middle",color:J.a.A700,flexItem:!0}),Object(it.jsx)(M.a,{to:"/",sx:{margin:1},variant:"outlined",component:E.b,children:"Reitit"}),Object(it.jsx)(H.a,{orientation:"vertical",variant:"middle",color:J.a.A700,flexItem:!0}),Object(it.jsx)(M.a,{to:"/details",sx:{margin:1},variant:"outlined",component:E.b,children:"Pistetiedot"}),Object(it.jsx)(H.a,{orientation:"vertical",variant:"middle",color:J.a.A700,flexItem:!0}),Object(it.jsx)(M.a,{to:"/planning",sx:{margin:1},variant:"outlined",component:E.b,children:"Reittisuunnittelu"}),Object(it.jsx)(H.a,{orientation:"vertical",variant:"middle",color:J.a.A700,flexItem:!0})]})},It=function(t){var e,n=Object(b.c)((function(t){return t.notification})).alert,a=Object(b.b)();Object(l.useEffect)((function(){var t=JSON.parse(localStorage.getItem("".concat(D.a,".routes")))||null;null!==t&&t.length>0&&(a({type:"route_control/setRoutes",routes:t}),a({type:"notification_control/setAlert",alert:{message:"Reitit palautettu"}}))}),[]);var i=Object(it.jsxs)(s.a.Fragment,{children:[Object(it.jsx)(M.a,{color:"secondary",size:"small",onClick:function(){return a({type:"notification_control/resetAlert"})},children:"UNDO"}),Object(it.jsx)(z.a,{size:"small","aria-label":"close",color:"inherit",onClick:function(){return a({type:"notification_control/resetAlert"})},children:Object(it.jsx)(q.a,{fontSize:"small"})})]});return Object(it.jsx)("article",{id:t.id,"data-testid":t.id,children:Object(it.jsx)(E.a,{children:Object(it.jsxs)(L.a,{theme:Object(F.a)({palette:{primary:{main:G.a.A700},secondary:{main:J.a.A700},neutral:{main:V.a.A700}}}),children:[Object(it.jsx)(N.a,{variant:"h5",children:"StopOver"}),Object(it.jsx)(St,{id:"".concat(t.id,".navigation")}),Object(it.jsx)(xt,{id:"".concat(t.id,".content")}),Object(it.jsx)(T.a,{id:"".concat(t.id,".snack"),open:null!==n,autoHideDuration:6e3,onClose:function(){return a({type:"notification_control/resetAlert"})},message:null!==(e=null===n||void 0===n?void 0:n.message)&&void 0!==e?e:"testi",action:i})]})})})};u.a.render(Object(it.jsx)(s.a.StrictMode,{children:Object(it.jsx)(b.a,{store:P,children:Object(it.jsx)(j.a,{client:R,children:Object(it.jsx)(It,{id:D.a})})})}),document.getElementById("root")),m()},59:function(t){t.exports=JSON.parse('{"a":"rff.app.stopover"}')}},[[190,1,2]]]);
//# sourceMappingURL=main.368faa7f.chunk.js.map